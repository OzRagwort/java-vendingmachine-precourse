# 미션 - 자판기

## 🔍 기능 목록

### 자판기의 보유 금액을 설정하고 동전을 생성하는 기능

- [x] 자판기가 보유한 금액을 입력받는 기능
- [x] 자판기가 보유한 금액으로 동전을 무작위로 생성하는 기능
- 예외 검증
    - [x] 금액이 숫자인지 검증한다.
    - [x] 금액이 0원 ~ 2147483647원인지 검증한다.
    - [x] 금액이 10원으로 나누어 떨어지는지 검증한다.

### 자판기가 보유한 동전의 종류와 개수를 출력하는 기능

- [x] 자판기가 보유한 동전을 500원, 100원, 50원, 10원 순서대로 개수를 출력하는 기능

### 판매할 상품을 등록하는 기능

- [x] 상품명, 가격, 수량을 입력받는 기능
- [x] 입력받은 정보로 상품을 등록하는 기능
- 예외 검증
    - [x] 상품명, 가격, 수량은 쉼표로, 개별 상품은 대괄호([])로 묶어 세미콜론(;)으로 구분하는지 검증한다.
    - [x] 상품 가격이 숫자인지 검증한다.
    - [x] 상품 가격이 100원 ~ 2147483647원인지 검증한다.
    - [x] 상품 가격이 10원으로 나누어 떨어지는지 검증한다.
    - [x] 입력한 상품 중 상품명 중복이 없는지 검증한다.
    - [ ] 이미 등록된 상품명은 등록할 수 없다.

### 돈을 투입하는 기능

- [x] 상품 구입을 위해 투입하는 돈을 입력받는 기능
    - [x] 기존에 이미 투입된 돈에 추가되야 한다.
- 예외 검증
    - [x] 투입 금액이 숫자인지 검증한다.
    - [x] 투입 금액이 0원 ~ 2147483647원인지 검증한다.
    - [x] 투입 금액이 10원으로 나누어 떨어지는지 검증한다.

### 상품을 구매하는 기능

- [x] 현재 사용할 수 있는 돈을 출력하는 기능
- [x] 사용자가 투입한 금액으로 상품을 구매하는 기능
- [x] 남은 금액이 구매할 수 있는 상품의 최저 가격보다 적거나, 모두 매진되기 전까지 반복해야 한다.
- 예외 검증
    - [x] 구매할 상품이 판매 등록되어 있는지 검증한다.
    - [x] 구매할 상품이 매진이 아닌지 검증한다.
    - [x] 구매할 상품의 가격보다 돈이 더 많은지 검증한다.

### 잔돈을 반환하는 기능

- [x] 현재 사용할 수 있는 돈을 출력하는 기능
- [x] 반환할 잔돈을 계산하는 기능
    - [x] 상품 구매가 끝나면 바로 잔돈을 돌려줘야 한다.
    - [x] 지폐를 잔돈으로 반환하는 경우는 없다.
    - [x] 현재 보유한 동전으로 반환되는 동전의 개수가 최소가 되도록 잔돈을 돌려준다.
    - [x] 가진 동전으로 반환할 수 있는 금액만큼만 반환한다.
- [x] 잔돈을 반환한 후 남은 동전과 금액을 계산하는 기능
    - [x] 반환되지 않은 동전, 금액은 자판기에 남는다.
- [x] 잔돈을 출력하는 기능
    - [x] 잔돈은 반환된 동전만 출력한다.

### 예외 공통

- [x] 잘못된 값을 입력할 경우 `IllegalArgumentException`를 발생시킨다.
- [x] "[ERROR]"로 시작하는 에러 메시지를 출력한다.
- [x] 에러 메시지를 출력한 후 재입력 받는다.

---

## 📔 Controller(VendingMachine) 기능 사용 예시

- `initHoldingMoney` : 보유 금액을 설정하고 무작위로 동전을 생성하는 메소드
  ```text
  자판기가 보유하고 있는 금액을 입력해 주세요.
  450
  ```
- `showAllCoinQuantity` : 보유한 동전의 개수를 500원, 100원, 50원, 10원 순서대로 출력하는 메소드
  ```text
  자판기가 보유한 동전
  500원 - 0개
  100원 - 4개
  50원 - 1개
  10원 - 0개
  ```
- `registerProducts` : 판매할 상품을 [상품명,가격,수량] 형식으로 입력받아 등록하는 메소드
  ```text
  [콜라,1500,20];[사이다,1000,10]
  ```
- `sellProduct` : 상품 구매의 전 과정을 실행하는 메소드
    - `insertMoney` : 투입 금액을 입력받는 메소드
    - `sellProductStep` : 상품을 구매하는 메소드
    - `returnChange` : 잔돈을 반환하는 메소드
  ```text
  투입 금액을 입력해 주세요.
  3000
  
  투입 금액: 3000원
  구매할 상품명을 입력해 주세요.
  콜라
  
  투입 금액: 1500원
  구매할 상품명을 입력해 주세요.
  사이다
  
  투입 금액: 500원
  잔돈
  100원 - 4개
  50원 - 1개
  ```

---

## ❕ 예외 메시지

- `[ERROR] 상품은 [상품명,가격,수량]으로 입력해주세요.`
    - PRODUCT_INVALID_FORMAT_ERROR_MESSAGE
    - 상품 추가 시 잘못된 형식으로 입력한 경우 발생
- `[ERROR] 같은 이름을 가진 상품이 없습니다.`
    - NO_SAME_NAME_PRODUCT_ERROR_MESSAGE
    - 구매하려는 상품이 등록되어있지 않은 경우 발생
- `[ERROR] 상품이 매진되었습니다.`
    - PRODUCT_SOLD_OUT_ERROR_MESSAGE
    - 매진된 상품을 구매하려한 경우 발생
- `[ERROR] 상품명은 중복되지 않게 입력해주세요.`
    - PRODUCT_DUPLICATE_NAME_ERROR_MESSAGE
    - 입력한 상품명 중 중복이 있는 경우 발생
- `[ERROR] 돈은 2147483647 이하의 숫자로 입력해주세요.`
    - MONEY_NOT_NUMBER_ERROR_MESSAGE
    - 돈, 가격을 문자, 소수, 자료형 이상의 숫자를 입력한 경우 발생
- `[ERROR] 0원 이상으로 입력해주세요.`
    - MONEY_LOWER_THEN_ZERO_ERROR_MESSAGE
    - 돈을 음수로 입력한 경우 발생
- `[ERROR] 돈이 부족합니다.`
    - MONEY_LOWER_THEN_PRICE_ERROR_MESSAGE
    - 구매하려는 상품의 가격이 사용 가능한 돈보다 비싼 경우 발생
- `[ERROR] 돈은 10원으로 나누어 떨어져야 합니다.`
    - MONEY_NOT_DIVISIBLE_BY_10_ERROR_MESSAGE
    - 입력한 돈, 가격이 10원으로 나누어 떨어지지 않은 경우 발생
- `[ERROR] 가격은 100원 이상으로 입력해주세요.`
    - PRICE_LOWER_THEN_MINIMUM_PRICE_ERROR_MESSAGE
    - 상품 추가 시 가격을 100원 미만으로 입력한 경우 발생
- `[ERROR] 수량은 2147483647 이하의 숫자로 입력해주세요.`
    - QUANTITY_NOT_NUMBER_ERROR_MESSAGE
    - 수량을 문자, 소수, 자료형 이상의 숫자를 입력한 경우 발생
- `[ERROR] 수량은 0개 이상으로 입력해주세요.`
    - QUANTITY_LOWER_THEN_ZERO_ERROR_MESSAGE
    - 수량을 음수로 입력한 경우 발생
